{"ast":null,"code":"import _regeneratorRuntime from\"/home/ranju/location/meDossier/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ranju/location/meDossier/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ranju/location/meDossier/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{Tabs,Tab,Row,Nav,Navbar,Card,Button}from\"react-bootstrap\";import{withStyles,makeStyles}from\"@material-ui/core/styles\";import{Table,TableBody,TableCell,TableContainer,TableHead,TableRow}from\"@material-ui/core\";import Paper from\"@material-ui/core/Paper\";import ipfs from\"../ipfs\";import\"bootstrap/dist/css/bootstrap.min.css\";import logo from\"./logo.png\";import\"./general.css\";import\"./patient.css\";import history from\"./history\";import Web3 from\"web3\";import{CONTRACT_ADDRESS,ABI}from\"../config.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Patient(props){var dnameRef=useRef();var reasonRef=useRef();var dateRef=useRef();var addressRef=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),ipfshash=_useState2[0],setIpfshash=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),buffer=_useState4[0],setBuffer=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),records=_useState6[0],setRecords=_useState6[1];console.log(props.records);console.log(props.patient);// const[records,setRecords] =useState([]);\nvar doctorRef=useRef();var grantRef=useRef();var name=localStorage.getItem(\"name\");var dob=localStorage.getItem(\"dob\");var gender=localStorage.getItem(\"gender\");var bloodgroup=localStorage.getItem(\"bloodgroup\");var phone=localStorage.getItem(\"phone\");var currentAccount=localStorage.getItem(\"currentAccount\");var isDoctor=localStorage.getItem(\"isdoctor\");var isAdmin=localStorage.getItem(\"isUser\");var ispatient=localStorage.getItem(\"ispatient\");var web3=new Web3(Web3.givenProvider);var contract=new web3.eth.Contract(ABI,CONTRACT_ADDRESS);var useStyles=makeStyles({table:{minWidth:700},root:{width:\"100%\"},container:{maxHeight:440}});var classes=useStyles();var StyledTablecell=withStyles(function(theme){return{head:{backgroundColor:theme.palette.info.main,color:theme.palette.common.blue},body:{fontSIze:14}};})(TableCell);var StyledTableRow=withStyles(function(theme){return{root:{\"&:nth-of-type(odd)\":{backgroundColor:theme.palette.action.hover,color:theme.palette.common.pink}}};})(TableRow);useEffect(function(){getPatientRecord();},[]);var uploadrecord=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dname,reason,date){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(\"hh\");console.log(dname,reason,date);console.log(currentAccount);console.log(contract);_context.next=7;return contract.methods.addRecord(dname,reason,date,ipfshash,currentAccount).send({from:currentAccount});case 7:res=_context.sent;console.log(res);getPatientRecord();_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);alert(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function uploadrecord(_x,_x2,_x3){return _ref.apply(this,arguments);};}();//Get Patient details by patient\nvar getPatientRecord=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var recordlength,recordlist,i,record;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return contract.methods.getrecordlist(currentAccount).call({from:currentAccount});case 3:recordlength=_context2.sent;recordlist=[];i=0;case 6:if(!(i<recordlength)){_context2.next=15;break;}_context2.next=9;return contract.methods.getPatientRecords(currentAccount,i).call({from:currentAccount});case 9:record=_context2.sent;console.log(record);recordlist.push(record);case 12:i++;_context2.next=6;break;case 15:setRecords(recordlist);// localStorage.setItem('dname',records.dname);\n// localStorage.setItem('reason',records.reason)\n// localStorage.setItem('visitDate',records.visitDate)\n// localStorage.setItem('ipfs',records.ipfs)\n// console.log(records)\n_context2.next=21;break;case 18:_context2.prev=18;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 21:case\"end\":return _context2.stop();}}},_callee2,null,[[0,18]]);}));return function getPatientRecord(){return _ref2.apply(this,arguments);};}();var Details=function Details(){return/*#__PURE__*/_jsxs(\"div\",{className:\"Details\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Medical Records are important for you and we care about them and store them securely! Get your records anywhere with just a touch!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Details\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Account Address:\",/*#__PURE__*/_jsx(\"span\",{children:currentAccount})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name : \"}),/*#__PURE__*/_jsx(\"span\",{children:name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Phone \"}),\":\",/*#__PURE__*/_jsx(\"span\",{children:phone}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Gender \"}),\":\",/*#__PURE__*/_jsx(\"span\",{children:gender}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Date of Birth \"}),\":\",/*#__PURE__*/_jsx(\"span\",{children:dob}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Blood Group \"}),\":\",/*#__PURE__*/_jsx(\"span\",{children:bloodgroup})]})]})]});};var handlechange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var file,reader;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.preventDefault();//capture the userfile\nfile=event.target.files[0];//Read the file\nreader=new window.FileReader();reader.readAsArrayBuffer(file);//file is converted to a buffer to prepare for uploading to IPFS\nreader.onloadend=function(){var buffer=Buffer(reader.result);setBuffer(buffer);console.log(\"buffer\",buffer);};case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handlechange(_x4){return _ref3.apply(this,arguments);};}();var onsubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event){var ipfsHash;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:event.preventDefault();console.log(\"hh\");_context4.next=4;return ipfs.add(buffer);case 4:ipfsHash=_context4.sent;console.log(ipfsHash);console.log(ipfsHash[0].hash);setIpfshash(ipfsHash[0].hash);case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function onsubmit(_x5){return _ref4.apply(this,arguments);};}();var Upload=function Upload(){return/*#__PURE__*/_jsxs(\"div\",{className:\"ReportUpload\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\" \",\"!!!Upload your records to the meDossier for the highest level of security!!!\"]}),/*#__PURE__*/_jsxs(Card,{className:\"small card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upload\",children:[/*#__PURE__*/_jsx(\"label\",{children:\" Upload your report to IPFS\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onsubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handlechange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{onClick:onsubmit,children:\"Submit\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\" Upload your record to blockchain \"}),/*#__PURE__*/_jsx(\"br\",{}),\"Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name of the doctor\",ref:dnameRef}),/*#__PURE__*/_jsx(\"br\",{}),\"Reason:\",\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Reason to visit hospital\",ref:reasonRef}),/*#__PURE__*/_jsx(\"br\",{}),\"VisitedDate: \",/*#__PURE__*/_jsx(\"input\",{type:\"date\",ref:dateRef}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){event.preventDefault();var dname=dnameRef.current.value;var reason=reasonRef.current.value;var date=dateRef.current.value;//  const address = reasonRef.current.value\nuploadrecord(dname,reason,date);},children:\"Submit\"})]})]})]});};var Report=function Report(){if(records.length===0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Report\"}),/*#__PURE__*/_jsx(\"p\",{children:\" Your record will appear here.\"}),/*#__PURE__*/_jsx(\"p\",{children:\" loading........\"})]});}if(!currentAccount){history.push(\"/\");}if(isDoctor==\"true\"){history.push(\"/patient\");}if(isAdmin==\"true\"){history.push(\"/Registration_office\");}return/*#__PURE__*/_jsxs(\"div\",{className:\"Report\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Report\"}),/*#__PURE__*/_jsx(Paper,{className:classes.root,children:/*#__PURE__*/_jsx(TableContainer,{className:classes.container,children:/*#__PURE__*/_jsxs(Table,{className:classes.table,size:\"small\",stickyHeader:true,\"aria-label\":\"sticky table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTablecell,{children:\" #\"}),/*#__PURE__*/_jsx(StyledTablecell,{children:\"Doctor name\"}),/*#__PURE__*/_jsx(StyledTablecell,{children:\"Reason to visit doctor \"}),/*#__PURE__*/_jsx(StyledTablecell,{children:\"VisitedDate\"}),/*#__PURE__*/_jsx(StyledTablecell,{children:\"Records\"})]})}),records.map(function(record,key){return/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsxs(StyledTableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:key}),/*#__PURE__*/_jsx(TableCell,{children:record.dname}),/*#__PURE__*/_jsx(TableCell,{children:record.reason}),/*#__PURE__*/_jsx(TableCell,{children:record.visitedDate}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://ipfs.io/ipfs/\".concat(record.ipfs),target:\"_blank\",children:[\" \",\"click here to view your record\"]})})]},key)});})]})})})]});};var Access=function Access(){return/*#__PURE__*/_jsxs(\"div\",{className:\"small card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Grant/Revoke Access\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Provide Access: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\" Address to grant access\",ref:grantRef}),/*#__PURE__*/_jsxs(Button,{onClick:function onClick(event){event.preventDefault();var doctor=grantRef.current.value;console.log(doctor);props.grantAccess(doctor);},children:[\" \",\"Submit\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\" Revoke Access: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\" Address to revoke access from\",ref:doctorRef}),/*#__PURE__*/_jsxs(Button,{onClick:function onClick(event){event.preventDefault();var doctor=doctorRef.current.value;console.log(doctor);props.revokeAccess(doctor);},children:[\" \",\"Submit\"]})]})]});};if(!currentAccount){history.push(\"/\");}if(isDoctor==\"true\"){history.push(\"/doctor_dashboard\");}if(isAdmin==\"true\"){history.push(\"/Registration_office\");}return/*#__PURE__*/_jsxs(\"div\",{className:\"patient_main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav_main\",children:/*#__PURE__*/_jsxs(Navbar,{expand:\"lg\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,width:\"120\",height:\"40\",className:\"d-inline-block align-top\"}),/*#__PURE__*/_jsx(Navbar.Toggle,{}),/*#__PURE__*/_jsxs(Navbar.Collapse,{className:\"justify-content-end\",children:[/*#__PURE__*/_jsxs(Nav.Link,{a:true,href:\"/patient\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-1x fa-user-circle\"}),\" \",name,\" \"]}),/*#__PURE__*/_jsxs(Button,{onClick:function onClick(e){return props.logout();},children:[\" \",/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-1x fa-sign-out-alt\"}),\" Log out\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-wrapper\",children:/*#__PURE__*/_jsx(Tab.Container,{defaultActiveKey:\"details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-3\",children:/*#__PURE__*/_jsxs(Nav,{variant:\"pills\",className:\"flex-column\",children:[/*#__PURE__*/_jsxs(Nav.Item,{children:[/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"details\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Details\"})}),/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsxs(Nav.Item,{children:[/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"profile\",children:/*#__PURE__*/_jsx(\"b\",{children:\"AccessRecord\"})}),\" \",/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsxs(Nav.Item,{children:[/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"uploadRecord\",children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"UploadRecord\"})]}),/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsxs(Nav.Item,{children:[/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"access\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Grant/Revoke Acccess\"})}),/*#__PURE__*/_jsx(\"hr\",{})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-9\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Welcome to MeDossier\"}),/*#__PURE__*/_jsxs(Tab.Content,{children:[/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"details\",title:\"Details\",children:/*#__PURE__*/_jsx(Details,{})}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"profile\",title:\"AcessRecord\",children:/*#__PURE__*/_jsx(Report,{})}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"uploadRecord\",title:\"UploadRecord\",children:/*#__PURE__*/_jsx(Upload,{})}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"access\",title:\"Grant/Revoke Acccess\",children:/*#__PURE__*/_jsx(Access,{})})]})]})]})})})]});}export default Patient;","map":{"version":3,"sources":["/home/ranju/location/meDossier/frontend/src/pages/patients_dashboard.js"],"names":["React","useEffect","useRef","useState","Tabs","Tab","Row","Nav","Navbar","Card","Button","withStyles","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","ipfs","logo","history","Web3","CONTRACT_ADDRESS","ABI","Patient","props","dnameRef","reasonRef","dateRef","addressRef","ipfshash","setIpfshash","buffer","setBuffer","records","setRecords","console","log","patient","doctorRef","grantRef","name","localStorage","getItem","dob","gender","bloodgroup","phone","currentAccount","isDoctor","isAdmin","ispatient","web3","givenProvider","contract","eth","Contract","useStyles","table","minWidth","root","width","container","maxHeight","classes","StyledTablecell","theme","head","backgroundColor","palette","info","main","color","common","blue","body","fontSIze","StyledTableRow","action","hover","pink","getPatientRecord","uploadrecord","dname","reason","date","methods","addRecord","send","from","res","alert","getrecordlist","call","recordlength","recordlist","i","getPatientRecords","record","push","Details","handlechange","event","preventDefault","file","target","files","reader","window","FileReader","readAsArrayBuffer","onloadend","Buffer","result","onsubmit","add","ipfsHash","hash","Upload","current","value","Report","length","map","key","visitedDate","Access","doctor","grantAccess","revokeAccess","e","logout"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { Tabs, Tab, Row, Nav, Navbar, Card, Button } from \"react-bootstrap\";\nimport { withStyles, makeStyles } from \"@material-ui/core/styles\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\nimport Paper from \"@material-ui/core/Paper\";\nimport ipfs from \"../ipfs\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport logo from \"./logo.png\";\nimport \"./general.css\";\nimport \"./patient.css\";\nimport history from \"./history\";\nimport Web3 from \"web3\";\nimport { CONTRACT_ADDRESS, ABI } from \"../config.js\";\n\nfunction Patient(props) {\n  const dnameRef = useRef();\n  const reasonRef = useRef();\n  const dateRef = useRef();\n  const addressRef = useRef();\n  const [ipfshash, setIpfshash] = useState();\n  const [buffer, setBuffer] = useState();\n  const [records, setRecords] = useState([]);\n\n  console.log(props.records);\n  console.log(props.patient);\n  // const[records,setRecords] =useState([]);\n  const doctorRef = useRef();\n  const grantRef = useRef();\n\n  const name = localStorage.getItem(\"name\");\n  const dob = localStorage.getItem(\"dob\");\n  const gender = localStorage.getItem(\"gender\");\n  const bloodgroup = localStorage.getItem(\"bloodgroup\");\n  const phone = localStorage.getItem(\"phone\");\n  const currentAccount = localStorage.getItem(\"currentAccount\");\n  const isDoctor = localStorage.getItem(\"isdoctor\");\n  const isAdmin = localStorage.getItem(\"isUser\");\n  const ispatient = localStorage.getItem(\"ispatient\");\n\n  const web3 = new Web3(Web3.givenProvider);\n  const contract = new web3.eth.Contract(ABI, CONTRACT_ADDRESS);\n\n  const useStyles = makeStyles({\n    table: {\n      minWidth: 700,\n    },\n    root: {\n      width: \"100%\",\n    },\n    container: {\n      maxHeight: 440,\n    },\n  });\n  const classes = useStyles();\n  const StyledTablecell = withStyles((theme) => ({\n    head: {\n      backgroundColor: theme.palette.info.main,\n      color: theme.palette.common.blue,\n    },\n    body: {\n      fontSIze: 14,\n    },\n  }))(TableCell);\n\n  const StyledTableRow = withStyles((theme) => ({\n    root: {\n      \"&:nth-of-type(odd)\": {\n        backgroundColor: theme.palette.action.hover,\n        color: theme.palette.common.pink,\n      },\n    },\n  }))(TableRow);\n\n  useEffect(() => {\n    getPatientRecord();\n  }, []);\n\n  const uploadrecord = async (dname, reason, date) => {\n    try {\n      console.log(\"hh\");\n      console.log(dname, reason, date);\n      console.log(currentAccount);\n      console.log(contract);\n      const res = await contract.methods\n        .addRecord(dname, reason, date, ipfshash, currentAccount)\n        .send({ from: currentAccount });\n      console.log(res);\n      getPatientRecord();\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n  //Get Patient details by patient\n  const getPatientRecord = async () => {\n    try {\n      const recordlength = await contract.methods\n        .getrecordlist(currentAccount)\n        .call({ from: currentAccount });\n      const recordlist = [];\n      for (let i = 0; i < recordlength; i++) {\n        const record = await contract.methods\n          .getPatientRecords(currentAccount, i)\n          .call({ from: currentAccount });\n        console.log(record);\n\n        recordlist.push(record);\n      }\n      setRecords(recordlist);\n      // localStorage.setItem('dname',records.dname);\n      // localStorage.setItem('reason',records.reason)\n      // localStorage.setItem('visitDate',records.visitDate)\n      // localStorage.setItem('ipfs',records.ipfs)\n\n      // console.log(records)\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const Details = () => {\n    return (\n      <div className=\"Details\">\n        <h5>\n          Medical Records are important for you and we care about them and store\n          them securely! Get your records anywhere with just a touch!\n        </h5>\n        <div className=\"card\">\n          <h3>Your Details</h3>\n          <hr></hr>\n          <div>\n            <b>\n              Account Address:<span>{currentAccount}</span>\n            </b>\n          </div>\n          <div className=\"details\">\n            <b>Name : </b>\n            <span>{name}</span>\n            <br></br>\n            <b>Phone </b>:<span>{phone}</span>\n            <br></br>\n            <b>Gender </b>:<span>{gender}</span>\n            {/* </b> */}\n            <br />\n            <b>Date of Birth </b>:<span>{dob}</span>\n            {/* </b> */}\n            <br></br>\n            <b>Blood Group </b>:<span>{bloodgroup}</span>\n            {/* </b> */}\n          </div>\n        </div>\n      </div>\n    );\n  };\n  const handlechange = async (event) => {\n    event.preventDefault();\n    //capture the userfile\n    const file = event.target.files[0];\n    //Read the file\n    let reader = new window.FileReader();\n    reader.readAsArrayBuffer(file);\n    //file is converted to a buffer to prepare for uploading to IPFS\n    reader.onloadend = () => {\n      let buffer = Buffer(reader.result);\n      setBuffer(buffer);\n      console.log(\"buffer\", buffer);\n    };\n  };\n  const onsubmit = async (event) => {\n    event.preventDefault();\n    console.log(\"hh\");\n    const ipfsHash = await ipfs.add(buffer);\n    console.log(ipfsHash);\n    console.log(ipfsHash[0].hash);\n    setIpfshash(ipfsHash[0].hash);\n  };\n\n  const Upload = () => {\n    return (\n      <div className=\"ReportUpload\">\n        <h5>\n          {\" \"}\n          !!!Upload your records to the meDossier for the highest level of\n          security!!!\n        </h5>\n        <Card className=\"small card\">\n          <div className=\"upload\">\n            <label> Upload your report to IPFS</label>\n            <form onSubmit={onsubmit}>\n              <input type=\"file\" onChange={handlechange} />\n              <br />\n              <Button onClick={onsubmit}>Submit</Button>\n            </form>\n          </div>\n\n          {/* Upload file to blockchain */}\n          <form>\n            <label> Upload your record to blockchain </label>\n            <br />\n            Name:\n            <input\n              type=\"text\"\n              placeholder=\"Name of the doctor\"\n              ref={dnameRef}\n            />\n            <br />\n            Reason:{\" \"}\n            <input\n              type=\"text\"\n              placeholder=\"Reason to visit hospital\"\n              ref={reasonRef}\n            />\n            <br />\n            VisitedDate: <input type=\"date\" ref={dateRef} />\n            <br />\n            <br />\n            {/* <input type =\"submit\"/> */}\n            <Button\n              onClick={(event) => {\n                event.preventDefault();\n\n                const dname = dnameRef.current.value;\n                const reason = reasonRef.current.value;\n                const date = dateRef.current.value;\n                //  const address = reasonRef.current.value\n\n                uploadrecord(dname, reason, date);\n              }}\n            >\n              Submit\n            </Button>\n          </form>\n        </Card>\n      </div>\n    );\n  };\n\n  const Report = () => {\n    if (records.length === 0) {\n      return (\n        <div>\n          <h2>Your Report</h2>\n          <p> Your record will appear here.</p>\n          <p> loading........</p>\n        </div>\n      );\n    }\n    if (!currentAccount) {\n      history.push(\"/\");\n    }\n    if (isDoctor == \"true\") {\n      history.push(\"/patient\");\n    }\n    if (isAdmin == \"true\") {\n      history.push(\"/Registration_office\");\n    }\n\n    return (\n      <div className=\"Report\">\n        <h2>Your Report</h2>\n        <Paper className={classes.root}>\n          <TableContainer className={classes.container}>\n            <Table\n              className={classes.table}\n              size=\"small\"\n              stickyHeader\n              aria-label=\"sticky table\"\n            >\n              <TableHead>\n                <TableRow>\n                  <StyledTablecell> #</StyledTablecell>\n                  <StyledTablecell>Doctor name</StyledTablecell>\n                  <StyledTablecell>Reason to visit doctor </StyledTablecell>\n                  <StyledTablecell>VisitedDate</StyledTablecell>\n                  <StyledTablecell>Records</StyledTablecell>\n                </TableRow>\n              </TableHead>\n\n              {records.map((record, key) => (\n                <TableBody>\n                  <StyledTableRow key={key}>\n                    <TableCell>{key}</TableCell>\n                    <TableCell>{record.dname}</TableCell>\n                    <TableCell>{record.reason}</TableCell>\n                    <TableCell>{record.visitedDate}</TableCell>\n                    <TableCell>\n                      <a\n                        href={`https://ipfs.io/ipfs/${record.ipfs}`}\n                        target=\"_blank\"\n                      >\n                        {\" \"}\n                        click here to view your record\n                      </a>\n                    </TableCell>\n                  </StyledTableRow>\n                </TableBody>\n              ))}\n            </Table>\n          </TableContainer>\n        </Paper>\n      </div>\n    );\n  };\n\n  const Access = () => {\n    return (\n      <div className=\"small card\">\n        <h3>Grant/Revoke Access</h3>\n        <hr />\n\n        <form>\n          <label>Provide Access: </label>\n          <input\n            type=\"text\"\n            placeholder=\" Address to grant access\"\n            ref={grantRef}\n          />\n          <Button\n            onClick={(event) => {\n              event.preventDefault();\n              const doctor = grantRef.current.value;\n              console.log(doctor);\n              props.grantAccess(doctor);\n            }}\n          >\n            {\" \"}\n            Submit\n          </Button>\n        </form>\n\n        <br />\n        <form>\n          <label> Revoke Access: </label>\n          <input\n            type=\"text\"\n            placeholder=\" Address to revoke access from\"\n            ref={doctorRef}\n          />\n          <Button\n            onClick={(event) => {\n              event.preventDefault();\n              const doctor = doctorRef.current.value;\n              console.log(doctor);\n              props.revokeAccess(doctor);\n            }}\n          >\n            {\" \"}\n            Submit\n          </Button>\n        </form>\n      </div>\n    );\n  };\n  if (!currentAccount) {\n    history.push(\"/\");\n  }\n  if (isDoctor == \"true\") {\n    history.push(\"/doctor_dashboard\");\n  }\n  if (isAdmin == \"true\") {\n    history.push(\"/Registration_office\");\n  }\n  return (\n    <div className=\"patient_main\">\n      <div className=\"nav_main\">\n        <Navbar expand=\"lg\">\n          <img\n            src={logo}\n            width=\"120\"\n            height=\"40\"\n            className=\"d-inline-block align-top\"\n          />\n          {/* patient */}\n          <Navbar.Toggle />\n          <Navbar.Collapse className=\"justify-content-end\">\n            <Nav.Link a href=\"/patient\">\n              {\" \"}\n              <i class=\"fas fa-1x fa-user-circle\"></i> {name}{\" \"}\n            </Nav.Link>\n            <Button onClick={(e) => props.logout()}>\n              {\" \"}\n              <i class=\"fas fa-1x fa-sign-out-alt\"></i> Log out\n            </Button>\n          </Navbar.Collapse>\n        </Navbar>\n      </div>\n\n      <div className=\"tab-wrapper\">\n        <Tab.Container defaultActiveKey=\"details\">\n          <div className=\"row\">\n            <div className=\"col-sm-3\">\n              <Nav variant=\"pills\" className=\"flex-column\">\n                <Nav.Item>\n                  <Nav.Link eventKey=\"details\">\n                    <b>Details</b>\n                  </Nav.Link>\n                  <hr />\n                </Nav.Item>\n                <Nav.Item>\n                  <Nav.Link eventKey=\"profile\">\n                    <b>AccessRecord</b>\n                  </Nav.Link>{\" \"}\n                  <hr />\n                </Nav.Item>\n                <Nav.Item>\n                  <Nav.Link eventKey=\"uploadRecord\">\n                    {\" \"}\n                    <b>UploadRecord</b>\n                  </Nav.Link>\n                  <hr />\n                </Nav.Item>\n                <Nav.Item>\n                  <Nav.Link eventKey=\"access\">\n                    <b>Grant/Revoke Acccess</b>\n                  </Nav.Link>\n                  <hr />\n                </Nav.Item>\n              </Nav>\n            </div>\n\n            <div className=\"col-sm-9\">\n              <h1> Welcome to MeDossier</h1>\n\n              <Tab.Content>\n                <Tab.Pane eventKey=\"details\" title=\"Details\">\n                  <Details />\n                </Tab.Pane>\n                <Tab.Pane eventKey=\"profile\" title=\"AcessRecord\">\n                  <Report />\n                </Tab.Pane>\n\n                <Tab.Pane eventKey=\"uploadRecord\" title=\"UploadRecord\">\n                  <Upload />\n                </Tab.Pane>\n                <Tab.Pane eventKey=\"access\" title=\"Grant/Revoke Acccess\">\n                  <Access />\n                </Tab.Pane>\n                {/* </Tabs> */}\n              </Tab.Content>\n            </div>\n          </div>\n        </Tab.Container>\n      </div>\n    </div>\n  );\n}\n\nexport default Patient;\n"]},"metadata":{},"sourceType":"module"}