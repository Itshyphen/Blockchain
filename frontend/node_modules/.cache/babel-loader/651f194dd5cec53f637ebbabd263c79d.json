{"ast":null,"code":"var _jsxFileName = \"/home/ranju/location/meDossier/frontend/src/pages/patients_dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from \"react\";\nimport { Tabs, Tab, Row, Nav, Navbar, Card, Button } from \"react-bootstrap\";\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@material-ui/core\";\nimport Paper from '@material-ui/core/Paper'; // import { Button } from \"react-bootstrap\";\n\nimport ipfs from \"../ipfs\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport logo from \"./logo.png\";\nimport './general.css';\nimport './patient.css';\nimport Web3 from \"web3\";\nimport { CONTRACT_ADDRESS, ABI } from \"../config.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Patient(props) {\n  _s();\n\n  const dnameRef = useRef();\n  const reasonRef = useRef();\n  const dateRef = useRef();\n  const addressRef = useRef();\n  const [ipfshash, setIpfshash] = useState();\n  const [buffer, setBuffer] = useState();\n  console.log(props.records);\n  console.log(props.patient); // const[records,setRecords] =useState([]);\n\n  const doctorRef = useRef();\n  const grantRef = useRef();\n  const name = localStorage.getItem('name');\n  const dob = localStorage.getItem('dob');\n  const gender = localStorage.getItem('gender');\n  const bloodgroup = localStorage.getItem('bloodgroup');\n  const phone = localStorage.getItem('phone');\n  const currentAccount = localStorage.getItem('currentAccount');\n  const web3 = new Web3(Web3.givenProvider);\n  const contract = new web3.eth.Contract(ABI, CONTRACT_ADDRESS);\n  const useStyles = makeStyles({\n    table: {\n      minWidth: 700\n    },\n    root: {\n      width: \"100%\"\n    },\n    container: {\n      maxHeight: 440\n    }\n  });\n  const classes = useStyles();\n  const StyledTablecell = withStyles(theme => ({\n    head: {\n      backgroundColor: theme.palette.info.main,\n      color: theme.palette.common.blue\n    },\n    body: {\n      fontSIze: 14\n    }\n  }))(TableCell);\n  const StyledTableRow = withStyles(theme => ({\n    root: {\n      \"&:nth-of-type(odd)\": {\n        backgroundColor: theme.palette.action.hover,\n        color: theme.palette.common.pink\n      }\n    }\n  }))(TableRow);\n\n  const uploadrecord = async (dname, reason, date, address) => {\n    try {\n      console.log(\"hh\");\n      console.log(dname, reason, date);\n      console.log(currentAccount);\n      console.log(contract);\n      const res = await contract.methods.addRecord(dname, reason, date, ipfshash, props.currentAccount).send({\n        from: props.currentAccount\n      });\n      console.log(res);\n      props.getPatientRecord();\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n  const Details = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Details\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Medical Records are important for you and we care about them and store them securely! Get your records anywhere with just a touch!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Account Address:\", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: currentAccount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 47\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"details\",\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Name :\", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Phone :\", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Gender :\", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: gender\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Date of Birth :\", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: dob\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 46\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Blood Group :\", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: bloodgroup\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 44\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }, this);\n  };\n\n  const handlechange = async event => {\n    event.preventDefault(); //capture the userfile \n\n    const file = event.target.files[0]; //Read the file\n\n    let reader = new window.FileReader();\n    reader.readAsArrayBuffer(file); //file is converted to a buffer to prepare for uploading to IPFS\n\n    reader.onloadend = () => {\n      let buffer = Buffer(reader.result);\n      setBuffer(buffer);\n      console.log(\"buffer\", buffer);\n    };\n  };\n\n  const onsubmit = async event => {\n    event.preventDefault();\n    console.log(\"hh\");\n    const ipfsHash = await ipfs.add(buffer);\n    console.log(ipfsHash);\n    console.log(ipfsHash[0].hash);\n    setIpfshash(ipfsHash[0].hash);\n  };\n\n  const Upload = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ReportUpload\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \" !!!Upload your records to the meDossier for the highest level of security!!!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"small card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"upload\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \" Upload your report to IPFS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: onsubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              onChange: handlechange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: onsubmit,\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 5\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \" Upload your record to blockchain  \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 60\n          }, this), \"Name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Name of the doctor\",\n            ref: dnameRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 26\n          }, this), \"Reason: \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Reason to visit hospital\",\n            ref: reasonRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 11\n          }, this), \"VisitedDate: \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            ref: dateRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 14\n          }, this), \"Your address:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Your address\",\n            ref: addressRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: event => {\n              event.preventDefault();\n              const dname = dnameRef.current.value;\n              const reason = reasonRef.current.value;\n              const date = dateRef.current.value;\n              const address = reasonRef.current.value;\n              uploadrecord(dname, reason, date, address);\n            },\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 10\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, this);\n  };\n\n  const Report = () => {\n    if (props.records.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Your Report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \" Your record will appear here.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \" loading........\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 10\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Report\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Your Report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        className: classes.root,\n        children: /*#__PURE__*/_jsxDEV(TableContainer, {\n          className: classes.container,\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            className: classes.table,\n            size: \"small\",\n            stickyHeader: true,\n            \"aria-label\": \"sticky table\",\n            children: [/*#__PURE__*/_jsxDEV(TableHead, {\n              children: /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(StyledTablecell, {\n                  children: \" #\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(StyledTablecell, {\n                  children: \"Doctor name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(StyledTablecell, {\n                  children: \"Reason to visit doctor \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(StyledTablecell, {\n                  children: \"VisitedDate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(StyledTablecell, {\n                  children: \"Records\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 21\n            }, this), props.records.map((record, key) => /*#__PURE__*/_jsxDEV(TableBody, {\n              children: /*#__PURE__*/_jsxDEV(StyledTableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: key\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: record.dname\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: record.reason\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: record.visitedDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: `https://ipfs.io/ipfs/${record.ipfs}`,\n                    target: \"_blank\",\n                    children: \" click here to view your record\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 36\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 25\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this);\n  };\n\n  const Access = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"small card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Grant/Revoke Access\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Provide Access: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \" Address to grant access\",\n            ref: grantRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: event => {\n              event.preventDefault();\n              const doctor = grantRef.current.value;\n              console.log(doctor);\n              props.grantAccess(doctor);\n            },\n            children: \" Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \" Revoke Access: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \" Address to revoke access from\",\n            ref: doctorRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: event => {\n              event.preventDefault();\n              const doctor = doctorRef.current.value;\n              console.log(doctor);\n              props.revokeAccess(doctor);\n            },\n            children: \" Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"patient_main\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar // bg=\"light\" \n    , {\n      color: \"purple\",\n      expand: \"lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo // width=\"250\"\n        // height=\"60\"\n        ,\n        className: \"d-inline-block align-top\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Navbar.Toggle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n        className: \"justify-content-end\",\n        children: [/*#__PURE__*/_jsxDEV(Navbar.Text, {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Welcome \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 30\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n          href: \"/\",\n          width: \"250\",\n          color: \"black\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 62\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(Tab.Container, {\n        defaultActiveKey: \"details\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm-3\",\n            children: /*#__PURE__*/_jsxDEV(Nav, {\n              className: \"flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(Nav.Item, {\n                children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n                  eventKey: \"details\",\n                  children: \"Details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 76\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Nav.Item, {\n                children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n                  eventKey: \"profile\",\n                  children: \"AccessRecord\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 29\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 82\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Nav.Item, {\n                children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n                  eventKey: \"uploadRecord\",\n                  children: \"UploadRecord\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 39\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 96\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Nav.Item, {\n                children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n                  eventKey: \"access\",\n                  children: \"Grant/Revoke Acccess\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 39\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 98\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 27\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm-9\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \" Welcome to Medossier\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(Tab.Content, {\n              children: [/*#__PURE__*/_jsxDEV(Tab.Pane, {\n                eventKey: \"details\",\n                title: \"Details\",\n                children: /*#__PURE__*/_jsxDEV(Details, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tab.Pane, {\n                eventKey: \"profile\",\n                title: \"AcessRecord\",\n                children: /*#__PURE__*/_jsxDEV(Report, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tab.Pane, {\n                eventKey: \"uploadRecord\",\n                title: \"UploadRecord\",\n                children: /*#__PURE__*/_jsxDEV(Upload, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tab.Pane, {\n                eventKey: \"access\",\n                title: \"Grant/Revoke Acccess\",\n                children: /*#__PURE__*/_jsxDEV(Access, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 16\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 317,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Patient, \"jHbJ3WdL8FXli6nOLQf9zWUaBNg=\", false, function () {\n  return [useStyles];\n});\n\n_c = Patient;\nexport default Patient;\n\nvar _c;\n\n$RefreshReg$(_c, \"Patient\");","map":{"version":3,"sources":["/home/ranju/location/meDossier/frontend/src/pages/patients_dashboard.js"],"names":["React","useRef","useState","Tabs","Tab","Row","Nav","Navbar","Card","Button","withStyles","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","ipfs","logo","Web3","CONTRACT_ADDRESS","ABI","Patient","props","dnameRef","reasonRef","dateRef","addressRef","ipfshash","setIpfshash","buffer","setBuffer","console","log","records","patient","doctorRef","grantRef","name","localStorage","getItem","dob","gender","bloodgroup","phone","currentAccount","web3","givenProvider","contract","eth","Contract","useStyles","table","minWidth","root","width","container","maxHeight","classes","StyledTablecell","theme","head","backgroundColor","palette","info","main","color","common","blue","body","fontSIze","StyledTableRow","action","hover","pink","uploadrecord","dname","reason","date","address","res","methods","addRecord","send","from","getPatientRecord","error","alert","Details","handlechange","event","preventDefault","file","target","files","reader","window","FileReader","readAsArrayBuffer","onloadend","Buffer","result","onsubmit","ipfsHash","add","hash","Upload","current","value","Report","length","map","record","key","visitedDate","Access","doctor","grantAccess","revokeAccess"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from  \"react\";\nimport {Tabs, Tab, Row, Nav, Navbar,Card,Button} from \"react-bootstrap\";\nimport {withStyles,makeStyles} from '@material-ui/core/styles';\nimport {Table, TableBody,TableCell,TableContainer,TableHead,TableRow}from \"@material-ui/core\";\nimport Paper from '@material-ui/core/Paper';\n// import { Button } from \"react-bootstrap\";\nimport ipfs from \"../ipfs\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport logo from \"./logo.png\"\nimport './general.css';\nimport './patient.css'\nimport Web3 from \"web3\";\nimport { CONTRACT_ADDRESS, ABI } from \"../config.js\";\n\n\n\n\nfunction Patient(props){\n   const dnameRef = useRef();\n   const reasonRef = useRef();\n   const dateRef = useRef();\n   const addressRef = useRef();\n   const [ipfshash, setIpfshash] =useState();\n   const[buffer,setBuffer] = useState();\n  console.log(props.records);\n  console.log(props.patient);\n  // const[records,setRecords] =useState([]);\n    const doctorRef = useRef();\n    const grantRef = useRef();\n\n    const name = localStorage.getItem('name')\n    const dob = localStorage.getItem('dob')\n    const gender = localStorage.getItem('gender')\n    const bloodgroup = localStorage.getItem('bloodgroup')\n    const phone = localStorage.getItem('phone')\n    const currentAccount =localStorage.getItem('currentAccount')\n\n   const web3 = new Web3(Web3.givenProvider)\n    const contract =  new web3.eth.Contract(ABI, CONTRACT_ADDRESS);\n\n  const useStyles = makeStyles({\n    table:{\n      minWidth:700,\n    },\n    root:{\n      width:\"100%\"\n\n    },\n    container:{\n      maxHeight:440,\n    }\n  });\n  const classes = useStyles();\n    const StyledTablecell = withStyles((theme)=>({\n      head:{\n          backgroundColor:theme.palette.info.main,\n          color : theme.palette.common.blue,\n      },\n      body:{\n          fontSIze:14,\n      },\n   })) (TableCell);\n\n   const StyledTableRow = withStyles((theme)=>({\n       root:{\n           \"&:nth-of-type(odd)\":{\n               backgroundColor: theme.palette.action.hover,\n               color: theme.palette.common.pink,\n           },\n       },\n   }))(TableRow)\n\n\n    const uploadrecord= async(dname,reason,date,address)=>{\n      try{\n        console.log(\"hh\")\n        console.log(dname,reason,date);\n        console.log(currentAccount);\n        console.log(contract);\n         const res = await contract.methods.addRecord(dname,reason,date,ipfshash,props.currentAccount).send({from:props.currentAccount});\n        console.log(res);\n         props.getPatientRecord();\n\n      }catch(error){\n        alert(error)\n\n      }\n    }\n\n    const Details = ()=>{\n        return(\n          <div className=\"Details\">\n            <h4>\n            Medical Records are important for you and we care about them and store them securely! Get your records anywhere with just a touch!\n\n            </h4>\n            <div className=\"card\">\n                          <h3>Your Details</h3>\n                          <hr></hr>\n                          <div>\n                            <b>\n                              Account Address:<span>{currentAccount}</span>\n                            </b>\n                          </div>\n                          <div className=\"details\">\n                            <b>\n                              Name :<span>{name}</span>\n                            </b>\n                            <br></br>\n                            <b>\n                              Phone :<span>{phone}</span>\n                            </b>\n                            <br></br>\n                            <b>\n                              Gender :<span>{gender}</span>\n                            </b>\n                            <br />\n                            <b>\n                              Date of Birth :<span>{dob}</span>\n                            </b>\n                            <br></br>\n                            <b>\n                              Blood Group :<span>{bloodgroup}</span>\n                            </b>\n                          </div>\n                        </div>\n            </div>\n\n        )\n    }\nconst handlechange = async(event)=>{\n  event.preventDefault();\n            //capture the userfile \n            const file = event.target.files[0];\n            //Read the file\n            let reader = new window.FileReader()\n            reader.readAsArrayBuffer(file)\n            //file is converted to a buffer to prepare for uploading to IPFS\n            reader.onloadend=()=>{\n                let buffer = Buffer(reader.result)\n                setBuffer(buffer);\n                console.log(\"buffer\",buffer);\n            }\n\n}\nconst onsubmit = async(event)=>{\n  event.preventDefault();\n  console.log(\"hh\");\n  const ipfsHash = await ipfs.add(buffer);\n  console.log(ipfsHash);\n        console.log(ipfsHash[0].hash)\n        setIpfshash(ipfsHash[0].hash);\n\n}\n\n    const Upload =()=>{\n        return(\n            <div className=\"ReportUpload\">\n              <h4> !!!Upload your records to the meDossier for the highest level of security!!!</h4>\n              <Card className=\"small card\">\n\n              <div className=\"upload\">\n                <label> Upload your report to IPFS</label>\n    <form onSubmit={onsubmit}>\n      \n        <input type= \"file\"  onChange ={handlechange}\n       \n        />\n        <br/>\n         <Button onClick={onsubmit}>Submit</Button>\n         </form>\n         </div>\n\n         {/* Upload file to blockchain */}\n         <form \n        //  onSubmit= {(event)=>{\n        //    event.preventDefault();\n        //    uploadrecord();\n        //  }}\n         >\n         <label> Upload your record to blockchain  </label><br/>\n          Name:<input \n         type =\"text\"placeholder=\"Name of the doctor\" \n         ref={dnameRef}/><br/>\n\n         Reason: <input \n         type=\"text\" placeholder=\"Reason to visit hospital\"\n         ref ={reasonRef}\n         />\n          <br/>\n         VisitedDate: <input type=\"date\" \n         ref ={dateRef}/>\n             <br/>\n         Your address:<input \n         type =\"text\"\n         placeholder=\"Your address\"\n         ref ={addressRef}/>\n         <br/>\n         {/* <input type =\"submit\"/> */}\n         <Button onClick={(event)=>{\n           event.preventDefault();\n\n           const dname = dnameRef.current.value;\n           const reason = reasonRef.current.value;\n           const date = dateRef.current.value;\n           const address = reasonRef.current.value\n\n           uploadrecord(dname,reason,date,address);\n         }}>Submit</Button>\n         </form>\n         </Card>\n         </div>\n        )\n    }\n\n  const Report =()=>{\n    if(props.records.length  === 0){\n      return(\n        <div> \n          <h2>\n          Your Report\n        </h2>\n        <p> Your record will appear here.</p>\n         <p> loading........</p>\n        </div>\n      )\n    }\n    \n    return(\n      <div className=\"Report\">\n        <h2>\n          Your Report\n        </h2>\n        <Paper className={classes.root}>\n        <TableContainer  className={classes.container}>\n                <Table className = {classes.table} size =\"small\" stickyHeader aria-label=\"sticky table\">\n                    <TableHead>\n                        <TableRow>\n                          <StyledTablecell> #</StyledTablecell>\n                            <StyledTablecell>\n                                Doctor name\n                            </StyledTablecell>\n                            <StyledTablecell>Reason to visit doctor </StyledTablecell>\n                            <StyledTablecell>VisitedDate</StyledTablecell>\n                            <StyledTablecell>Records</StyledTablecell>\n                        </TableRow>\n                    </TableHead>\n                    \n                    {props.records.map((record,key)=>( \n\n                    <TableBody>\n\n                        <StyledTableRow key ={key}>\n                          <TableCell>{key}</TableCell>\n                        <TableCell>{record.dname}</TableCell>\n                        <TableCell>{record.reason}</TableCell>\n                        <TableCell>{record.visitedDate}</TableCell>\n                        <TableCell><a href={`https://ipfs.io/ipfs/${record.ipfs}`} target=\"_blank\"> click here to view your record</a></TableCell>\n                        </StyledTableRow>\n                    </TableBody>))}\n                </Table>\n            </TableContainer>\n            </Paper>\n      </div>\n    )\n  }\n\n  const Access=()=>{\n    return(\n      <div className=\"small card\">\n        <h2>Grant/Revoke Access</h2>\n        <Card>\n    \n                <form \n                // onSubmit ={(event)=>{\n                //     event.preventDefault();\n                //     const doctor = doctorRef.current.value;\n                //     props.grantAccess(doctor);\n                // }}\n                >\n                    <label>Provide Access: </label>\n                    <input type=\"text\" placeholder=\" Address to grant access\"\n                    ref ={grantRef}/> \n                    <Button onClick ={(event)=>{\n                      event.preventDefault();\n                      const doctor = grantRef.current.value;\n                      console.log(doctor)\n                      props.grantAccess(doctor);\n                  }}> Submit</Button>\n                    </form>\n    \n                    <br/>\n                    <form \n                    // onSubmit ={(event)=>{\n                    //     event.preventDefault();\n                    //     const doctor = doctorRef.current.value;\n                    //     props.revokeAccess(doctor);\n                    // }}\n                    >\n                        <label> Revoke Access: </label>\n                        <input type=\"text\" placeholder=\" Address to revoke access from\"\n                        ref={doctorRef}/>\n                    <Button onClick  ={(event)=>{\n                        event.preventDefault();\n                        const doctor = doctorRef.current.value;\n                        console.log(doctor);\n                        props.revokeAccess(doctor);\n                    }}> Submit</Button>\n                    </form>\n                    </Card>\n    \n      </div>\n)\n  }\n    return(\n        \n        <div className=\"patient_main\">\n\n            <Navbar\n            // bg=\"light\" \n            color=\"purple\"\n            expand=\"lg\" \n            >\n              <img src={logo}\n              // width=\"250\"\n              // height=\"60\"\n              className=\"d-inline-block align-top\"\n              />\n            {/* patient */}\n            <Navbar.Toggle/>\n            <Navbar.Collapse className=\"justify-content-end\">\n              <Navbar.Text > <b>Welcome </b> </Navbar.Text>\n              <Nav.Link href =\"/\" width=\"250\" color=\"black\"> <b>Logout</b></Nav.Link>\n              </Navbar.Collapse>\n              </Navbar>\n\n            <div className =\"tab-wrapper\">\n            <Tab.Container  defaultActiveKey=\"details\">\n                    <div className =\"row\">\n                        <div className=\"col-sm-3\">\n                          <Nav  className=\"flex-column\">\n                            <Nav.Item>\n                            <Nav.Link eventKey=\"details\">Details</Nav.Link><hr/>\n                            </Nav.Item>\n                            <Nav.Item>\n                            <Nav.Link eventKey=\"profile\">AccessRecord</Nav.Link> <hr/></Nav.Item>                           \n                            <Nav.Item><Nav.Link eventKey=\"uploadRecord\">UploadRecord</Nav.Link><hr/></Nav.Item>\n                            <Nav.Item><Nav.Link eventKey=\"access\">Grant/Revoke Acccess</Nav.Link><hr/>\n                            </Nav.Item>\n\n                            </Nav> \n                          </div>\n\n                          <div className = \"col-sm-9\">\n                          <h1> Welcome to Medossier</h1>\n\n                            <Tab.Content>\n                {/* <Tabs defaultActiveKey=\"details\" id =\"uncontrolled-tab-example\"> */}\n                <Tab.Pane eventKey=\"details\" title =\"Details\" >\n                <Details/>\n                </Tab.Pane>\n                <Tab.Pane eventKey=\"profile\" title =\"AcessRecord\" >\n                  <Report/>\n                </Tab.Pane>\n\n                <Tab.Pane eventKey =\"uploadRecord\"  title=\"UploadRecord\">\n              <Upload/>\n             </Tab.Pane>\n             <Tab.Pane eventKey=\"access\" title=\"Grant/Revoke Acccess\">\n               <Access/>\n             </Tab.Pane>\n             {/* </Tabs> */}\n             </Tab.Content>\n            </div> \n </div>\n</Tab.Container>\n  </div>\n \n</div>\n)}\nexport default Patient;"]},"metadata":{},"sourceType":"module"}